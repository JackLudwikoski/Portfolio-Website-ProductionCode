{"version":3,"file":"component---src-pages-admin-js-99159c45d531e0dbc2ef.js","mappings":"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","sources":["webpack://sitesbyjack/./src/components/inbox.js","webpack://sitesbyjack/./src/services/auth.js","webpack://sitesbyjack/./src/components/login.js","webpack://sitesbyjack/./src/components/privateRoute.js","webpack://sitesbyjack/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://sitesbyjack/./src/pages/admin.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport \"./inbox.css\";\r\n\r\nconst Inbox = () => {\r\n\r\n    let [messages, setMessages] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetch(\"https://sitesbyjack.com/messages\")\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    throw Error(response.status);\r\n                }\r\n                return(response.json())\r\n            })\r\n            .then((responseJson) => {\r\n                setMessages(responseJson.data)\r\n            })\r\n            .catch((error) => {\r\n                console.log(error);\r\n            })\r\n    }, [])\r\n\r\n    const messageCells = messages.map((message) => \r\n        (\r\n            <tr>\r\n                <td>{message.firstName}</td>\r\n                <td>{message.lastName}</td>\r\n                <td>{message.email}</td>\r\n                <td>{message.reasonForContacting}</td>\r\n                <td>{message.message}</td>\r\n            </tr>\r\n        )\r\n    );\r\n\r\n    return (\r\n        <section className=\"messagesCont\">\r\n            <h1 className=\"messagesTitle\">Messages</h1>\r\n            <table className=\"messagesTable\">\r\n                <tr>\r\n                    <th>First Name</th>\r\n                    <th>Last Name</th>\r\n                    <th>Email</th>\r\n                    <th>Reason For Contacting</th>\r\n                    <th>Message</th>\r\n                </tr>\r\n                {messageCells}\r\n            </table>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Inbox;","// checks to see if the window is established\r\nexport const isBrowser = () => typeof window !== \"undefined\";\r\n\r\nexport const getUser = () => {\r\n    return (\r\n        isBrowser() && window.localStorage.getItem(\"gatsbyUser\")\r\n        ? JSON.parse(window.localStorage.getItem(\"gatsbyUser\"))\r\n        : {}\r\n    );\r\n}\r\n\r\nconst setUser = user => {\r\n    window.localStorage.setItem(\"gatsbyUser\", JSON.stringify(user));\r\n}\r\n\r\nexport const handleLogin = ({username, password}) => {\r\n    /*\r\n    let fetchedPassword = \"\";\r\n    fetch(\"http://localhost:3001/password/\")\r\n            .then((response) => {\r\n                console.log(response);\r\n                return(response.json())\r\n            })\r\n            .then((responseJson) => {\r\n                console.log(responseJson.password);\r\n                if (username === `jackludwikoski` && password === responseJson.password) {\r\n                    return setUser({\r\n                        username: `jackludwikoski`,\r\n                        name: `Jack`,\r\n                        email: `jdludwikoski@gmail.com`,\r\n                    })\r\n                }\r\n            });\r\n    */\r\n\r\n    if (username === `jackludwikoski` && password === `Sportjack137955!`) {\r\n        return setUser({\r\n            username: `jackludwikoski`,\r\n            name: `Jack`,\r\n            email: `jdludwikoski@gmail.com`,\r\n        })\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nexport const isLoggedIn = () => {\r\n    const user = getUser();\r\n\r\n    return !!user.username;\r\n}\r\n\r\nexport const logout = callback => {\r\n    setUser({});\r\n    callback();\r\n}","import React from \"react\";\r\nimport { navigate } from \"gatsby\";\r\nimport { handleLogin, isLoggedIn } from \"../services/auth\";\r\n\r\nimport \"../components/adminComponents/admin.css\";\r\n\r\nclass Login extends React.Component {\r\n    state = {\r\n        username: ``,\r\n        password: ``,\r\n    }\r\n\r\n    handleUpdate = event => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value,\r\n        })\r\n    }\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        handleLogin(this.state)\r\n    }\r\n\r\n    render() {\r\n        if (isLoggedIn()) {\r\n            navigate(`/admin/inbox`)\r\n        }\r\n\r\n        return (\r\n            <section className=\"adminLogin\">\r\n                <form className=\"adminLoginForm\" method=\"post\"\r\n                      onSubmit={\r\n                        event => {this.handleSubmit(event);\r\n                        navigate(`/admin/inbox`);\r\n                      }}>\r\n                    <h1 className=\"adminLoginFormTitle\">Admin Login</h1>\r\n                    <input type=\"text\" name=\"username\" className=\"adminUsername\" placeholder=\"Username\" onChange={this.handleUpdate}></input>\r\n                    <input type=\"password\" name=\"password\" className=\"adminPassword\" placeholder=\"Password\" onChange={this.handleUpdate}></input>\r\n                    <input type=\"submit\" value=\"Log In\" className=\"adminFormSubmit\"></input>\r\n                </form>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login;","import React, { Component } from \"react\";\r\nimport { navigate } from \"gatsby\";\r\nimport { isLoggedIn } from \"../services/auth\";\r\n\r\nconst PrivateRoute = ({ component: Component, location, ...rest }) => {\r\n    if (!isLoggedIn() && location.pathname !== `/admin/login`) {\r\n        navigate(\"/admin/login\");\r\n        return null;\r\n    }\r\n\r\n    return <Component {...rest} />\r\n}\r\n\r\nexport default PrivateRoute;","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from 'react';\r\nimport { Router } from '@reach/router';\r\nimport Inbox from \"../components/inbox\";\r\nimport Login from \"../components/login\";\r\nimport PrivateRoute from '../components/privateRoute';\r\n\r\nconst AdminPage = () => {\r\n    return (\r\n        <Router>\r\n            <PrivateRoute path=\"/admin/inbox\" component={Inbox} />\r\n            <Login path=\"/admin/login\" />\r\n        </Router>\r\n    );\r\n}\r\n\r\nexport default AdminPage;"],"names":["useState","messages","setMessages","useEffect","fetch","then","response","ok","Error","status","json","responseJson","data","catch","error","console","log","messageCells","map","message","firstName","lastName","email","reasonForContacting","className","getUser","window","localStorage","getItem","JSON","parse","setUser","user","setItem","stringify","handleLogin","username","password","name","isLoggedIn","Login","state","handleUpdate","event","setState","target","value","handleSubmit","preventDefault","render","navigate","method","onSubmit","type","placeholder","onChange","this","React","Component","component","location","rest","source","excluded","key","i","sourceKeys","Object","keys","length","indexOf","pathname","Router","path","Inbox"],"sourceRoot":""}